# Auto Subtitle Maker for Final Cut Pro (FCPXML Maker)

FCPXML Maker는 영상/음성 파일에서 자동으로 오디오를 추출하고, OpenAI 텍스트 변환 모델(Whisper)을 사용하여 자막을 생성한 뒤, 파이널 컷 프로(Final Cut Pro, FCP)에서 바로 불러올 수 있는 **.fcpxml** 파일로 변환해 주는 macOS 기반의 유틸리티 앱입니다.

## 🚀 주요 기능

- **자동 자막 생성**: 영상(MP4, MOV, MKV) 및 오디오(MP3, WAV) 파일을 앱에 드래그 앤 드롭하기만 하면 Whisper 모델을 이용해 빠르고 정확한 자막을 생성합니다.
- **다국어 및 확장 포맷 지원**: 기본적으로 한국어를 지원하며, 영상 외에도 MKV 컨테이너 및 다양한 오디오 전용 파일을 원활하게 처리합니다 (내부적으로 FFmpeg 활용).
- **파이널 컷 프로 연동**: 생성된 자막 타이밍 및 텍스트를 파이널 컷 프로와 완벽하게 호환되는 `FCPXML v1.11` 규격의 파일로 즉시 출력합니다. 사용자는 바로 FCP에 임포트하여 편집할 수 있습니다.
- **다양한 해상도 프리셋**: 일반적인 16:9 와이드 비율(1080p, 4K 등)은 물론, 세로형 9:16 비율(유튜브 쇼츠, 릴스, 틱톡용 1080p 및 4K)에 대한 해상도를 프리셋으로 제공합니다.
- **커스텀 스타일 프리셋**: 폰트, 크기, 정렬, 외곽선 및 테두리 색상 등을 자유롭게 설정할 수 있으며, 시스템에 설치된 폰트를 뷰어에서 바로 선택할 수 있습니다. 각 세팅을 "프리셋" 단위로 저장하여 여러 영상 스타일을 쉽게 관리할 수 있습니다.

## 🛠 시스템 요구 사항

- macOS 15.0 이상
- M1 (Apple Silicon) 이상 권장
- 시스템에 **Homebrew 및 FFmpeg** 가 설치되어 있어야 일부 미디어(MKV 등) 지원이 가능합니다. (`brew install ffmpeg`)

## 🏗 작동 원리
1. **오디오 추출**: AVFoundation 프레임워크를 우선 사용하여 오디오를 추출하며, 지원되지 않는 파일(MKV, MP3 등)은 시스템의 `ffmpeg` 바이너리를 통해 추출합니다. (16kHz 단일 채널 WAV 형태로 변환)
2. **트랜스크립션 (Whisper)**: 다운로드된 Whisper.cpp 기반 소형 모델(.bin)을 통해 오프라인 환경에서도 안전하고 빠르게 음성 데이터를 텍스트 세그먼트로 변환합니다.
3. **FCPXML 생성**: 얻어진 자막 세그먼트를 사용자가 선택한 FCP 프레임 레이트 및 해상도, 자막 텍스트 스타일에 맞춰 최종 XML 문서로 컴파일합니다.

## ✨ 설치 및 실행 (개발자용)

XCode를 통해 이 프로젝트를 클론하여 실행할 수 있습니다. 의존성 관리는 Swift Package Manager(SPM)로 관리됩니다.
```bash
git clone https://github.com/aumosita/auto_sub_maker_for_finalcutpro.git
cd auto_sub_maker_for_finalcutpro

# 앱 번들 빌드 스크립트 실행
./build_app.sh
```
위 스크립트를 실행하면 릴리즈 빌드 후 `/Applications` (응용 프로그램) 디렉토리로 설치됩니다.
